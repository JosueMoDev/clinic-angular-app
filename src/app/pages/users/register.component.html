<div class="w-full ">
  <div class="flex justify-center ">
    <div class="w-full p-5 px-10 space-y-2 shadow-xl m-7 bg-slate-50 dark:shadow-none rounded-xl dark:bg-slate-850">
      <p class="text-2xl text-start">Register form</p>
      <ol class="flex items-center justify-center w-full">
        <div class="flex justify-center w-full">
          <!-- first step -->
          <li *ngIf="isFirstStepValid!=='VALID'" Class="flex justify-center w-full items-center  after:content-[''] after:w-full after:h-1 after:border-b after:border-blue-300 after:border-4 dark:after:border-blue-800 after:inline-block ">
            <span class="flex items-center justify-center w-8 h-8 bg-blue-300 rounded-full dark:bg-blue-800 lg:h-10 lg:w-10 shrink-0" >
              <div class="flex items-center justify-center">
                <mat-icon *ngIf="isFirstStepValid==='VALID'" class="text-base text-center text-slate-900 dark:text-blue-50" fontIcon="done"/>
                <mat-icon  class="text-base text-center text-slate-900 dark:text-blue-50" fontIcon="person"/>
              </div>
            </span>
          </li>
          <li *ngIf="isFirstStepValid==='VALID'" class="flex justify-center w-full items-center  after:content-[''] after:w-full after:h-1 after:border-b after:border-teal-600 after:dark:border-teal-900 after:border-4  after:inline-block " >
            <span class="flex items-center justify-center w-8 h-8 bg-teal-600 rounded-full dark:bg-teal-900 lg:h-10 lg:w-10 shrink-0" >
              <div class="flex items-center justify-center">
                <mat-icon  class="text-base text-center text-teal-50" fontIcon="done"/>
              </div>
            </span>
          </li>
          <!-- first step -->
          <!-- first step -->
          <li *ngIf="isSecondStepValid!=='VALID'" class="flex justify-center w-full items-center  after:content-[''] after:w-full after:h-1 after:border-b after:border-blue-300 after:border-4 dark:after:border-blue-800 after:inline-block " >
            <span class="flex items-center justify-center w-8 h-8 bg-blue-300 rounded-full dark:bg-blue-800 lg:h-10 lg:w-10 shrink-0" >
              <div class="flex items-center justify-center">
                <mat-icon *ngIf="isSecondStepValid==='VALID'" class="text-base text-center text-slate-900 dark:text-blue-50" fontIcon="done"/>
                <mat-icon  class="text-base text-center text-slate-900 dark:text-blue-50" fontIcon="assignment"/>
              </div>
            </span>
          </li>
          <li *ngIf="isSecondStepValid==='VALID'" class="flex justify-center w-full items-center  after:content-[''] after:w-full after:h-1 after:border-b after:border-teal-600 after:dark:border-teal-900 after:border-4  after:inline-block " >
            <span class="flex items-center justify-center w-8 h-8 bg-teal-600 rounded-full dark:bg-teal-900 lg:h-10 lg:w-10 shrink-0" >
              <div class="flex items-center justify-center">
                <mat-icon  class="text-base text-center text-teal-50" fontIcon="done"/>
              </div>
            </span>
          </li>
          <!-- first step -->
          
            <li class="flex items-center w-fit ">
              <span class="flex items-center justify-center w-8 h-8 bg-blue-300 rounded-full lg:h-10 lg:w-10 dark:bg-blue-800 shrink-0">
                <div class="flex items-center justify-center">
                  <mat-icon class="text-base text-center text-slate-900 dark:text-blue-50" fontIcon="photo_camera"/>
                </div>
              </span>
            </li>
          </div>
        </ol>  
      
      <form role="form text-left w-full" enctype="multipart/form-data" (ngSubmit)="createUser()" [formGroup]="registerForm">
        <div class="py-5 ">
          <!-- Step 1 -->
          <div *ngIf="currentStep===1" formGroupName="personalInformation" >
            <div class="grid grid-cols-1 gap-4 ">
              <div class="grid w-full grid-cols-1 gap-4 mb-4 md:grid-cols-2">
                <div class="mb-4">
                  <div class="flex rounded-md ">
                    <span class="inline-flex items-center px-3 py-4 text-sm font-normal transition-all border-none rounded-l-lg cursor-pointer bg-blue-500/13 dark:bg-blue-500/13 dark:placeholder:text-slate-300 text-slate-800 dark:text-slate-100 bg-clip-padding focus:bg-white focus:text-gray-700 focus:outline-none focus:transition-shadow">
                      <div class="flex items-center justify-center align-middle">
                        <select 
                          class="uppercase bg-transparent border-none focus:outline-none" 
                          name="document"
                          formControlName="document_type"
                        > 
                          <option value="DUI">DUI</option>
                          <option value="PASSPORT">PASSPORT</option>
                        </select>
                      </div>
                    </span>
                    <input 
                      *ngIf="document_type==='DUI'"
                      type="text"  
                      class="placeholder:text-gray-700 text-sm focus:shadow-primary-outline leading-5.6 ease block w-full appearance-none rounded-r-lg border border-r border-y-0 border-gray-300 bg-blue-500/13 dark:border-slate-750 dark:placeholder:text-slate-300  bg-clip-padding py-4 px-3  font-normal text-slate-800 dark:text-slate-100 transition-all focus:border-slate-300 dark:focus:border-slate-700   focus:outline-none focus:transition-shadow" 
                      placeholder="DUI" 
                      formControlName="document_number"
                      mask="00000000-0"
                    />
                    <input 
                    *ngIf="document_type==='PASSPORT'"
                    type="text"  
                    class="placeholder:text-gray-700 text-sm focus:shadow-primary-outline leading-5.6 ease block w-full appearance-none rounded-r-lg border border-r border-y-0 border-gray-300 bg-blue-500/13 dark:border-slate-750 dark:placeholder:text-slate-300  bg-clip-padding py-4 px-3  font-normal text-slate-800 dark:text-slate-100 transition-all focus:border-slate-300 dark:focus:border-slate-700   focus:outline-none focus:transition-shadow" 
                    placeholder="PASSPORT" 
                    formControlName="document_number"
                    mask="A0000000"
                  />
                  </div>
                </div>
                <div class="mb-4">
                  <div class="flex rounded-md ">
                
                    <input 
                      type="email" 
                      class="placeholder:text-gray-700 text-sm focus:shadow-primary-outline leading-5.6 ease block w-full appearance-none rounded-l-lg border border-l border-y-0 border-gray-300 bg-blue-500/13 dark:border-slate-750 dark:placeholder:text-slate-300  bg-clip-padding py-4 px-3  font-normal text-slate-800 dark:text-slate-100 transition-all focus:border-slate-300 dark:focus:border-slate-700   focus:outline-none focus:transition-shadow" 
                      placeholder="Email" 
                      formControlName="email"
                    />
                    
                  
                  <span class="inline-flex items-center px-3 py-4 text-sm font-normal transition-all border-none rounded-r-lg cursor-pointer bg-blue-500/13 dark:placeholder:text-slate-300 text-slate-800 dark:text-slate-100 bg-clip-padding focus:bg-white focus:text-gray-700 focus:outline-none focus:transition-shadow">
                    <div class="flex items-center justify-center align-middle">
                      <select 
                        class="lowercase bg-transparent border-none focus:outline-none" 
                        name="document"
                        formControlName="email_provider"
                      > 
                        <option value="@gmail.com">@gmail.com</option>
                        <option value="@theclinic.com">@theclinic.com</option>
                      </select>
                    </div>
                  </span>
                  </div>
                  <div *ngIf="email?.invalid && (email?.dirty || email?.touched)">
                    <div  *ngIf="email?.errors?.['required']">
                      <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                        <mat-icon class="mx-2"  fontIcon="error"/> 
                        mail is required.
                      </span>
                    </div>
                    <div *ngIf="email?.errors?.['minlength']">
                      <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                        <mat-icon class="mx-2"  fontIcon="error"/>
                        mail must be at least 10 characters long.
                      </span>
                    </div>
                    <div *ngIf="email?.errors?.['forbiddenName']">
                      <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                        <mat-icon class="mx-2 "  fontIcon="error"/>
                          mail only could have  
                          a-z and dot(.) or  underscore(_)
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          
            <div class="grid w-full grid-cols-1 gap-4 mb-4 md:grid-cols-2">
              <div class="w-full mb-4">
                <input 
                type="text"  
                class="placeholder:text-gray-700 text-sm focus:shadow-primary-outline leading-5.6 ease block w-full appearance-none rounded-lg  bg-blue-500/13 dark:border-slate-750 dark:placeholder:text-slate-300  bg-clip-padding py-4 px-3  font-normal text-slate-800 dark:text-slate-100 transition-all focus:border-slate-300 dark:focus:border-slate-700   focus:outline-none focus:transition-shadow" 
                placeholder="Name" 
                formControlName="name"
                />
                <div *ngIf="name?.invalid && (name?.dirty || name?.touched)"
                    class="alert alert-danger">

                  <div  *ngIf="name?.errors?.['required']">
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/> 
                      Name is required.
                    </span>
                  </div>
                  <div *ngIf="name?.errors?.['minlength']">
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/>
                      Name must be at least 3 characters long.
                    </span>
                  </div>
                  <div *ngIf="name?.errors?.['maxlength']">
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/>
                      Name must be longger than 25 characters.
                    </span>
                  </div>
                  <div *ngIf="name?.errors?.['forbiddenName']">
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/>
                        Name only could have letters a-z.
                    </span>
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/>
                        Only two names are allowed.
                    </span>
                  </div>
                </div>
  
              </div>
              <div class="w-full mb-4">
                <input 
                type="text"  
                class="placeholder:text-gray-700 text-sm focus:shadow-primary-outline leading-5.6 ease block w-full appearance-none rounded-lg  bg-blue-500/13 dark:border-slate-750 dark:placeholder:text-slate-300  bg-clip-padding py-4 px-3  font-normal text-slate-800 dark:text-slate-100 transition-all focus:border-slate-300 dark:focus:border-slate-700   focus:outline-none focus:transition-shadow" 
                placeholder="Lastname" 
                formControlName="lastname"
  
                />
                <div *ngIf="lastname?.invalid && (lastname?.dirty || lastname?.touched)">
                  <div  *ngIf="lastname?.errors?.['required']">
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/> 
                      Lastame is required.
                    </span>
                  </div>
                  <div *ngIf="lastname?.errors?.['minlength']">
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/>
                      Lastname must be at least 3 characters long.
                    </span>
                  </div>
                  <div *ngIf="lastname?.errors?.['forbiddenName']">
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/>
                        Lastname only could have letters a-z.
                    </span>
                    <span  class="flex items-center pt-2 text-red-800 dark:text-red-400">
                      <mat-icon class="mx-2"  fontIcon="error"/>
                        Only two lastnames are allowed.
                    </span>
                  </div>
                </div>
              </div>
            </div>
         
            <div class="grid w-full grid-cols-1 gap-4 mb-4 md:grid-cols-2">
              <div class="w-full mb-4">
                <input 
                type="text"  
                class="placeholder:text-gray-700  text-sm focus:shadow-primary-outline leading-5.6 ease block w-full appearance-none rounded-lg  bg-blue-500/13 dark:border-slate-750 dark:placeholder:text-slate-300  bg-clip-padding py-4 px-3 font-normal text-slate-800 dark:text-slate-100 transition-all focus:border-slate-300 dark:focus:border-slate-700   focus:outline-none focus:transition-shadow" 
                placeholder="Phone" 
                formControlName="phone"
                prefix="+503"
                mask="0000-0000"
                />
              </div>
              <div class="w-full mb-4">
                <fieldset class="px-3 py-1 " data-role="controlgroup">
                  <div class="float-left">
                    <label for="male">Male</label>
                    <input 
                     type="radio"
                     class="w-4.8 h-4.8 ease mx-3 rounded-1.4 checked:bg-gradient-to-tl checked:from-blue-500 checked:to-violet-500 after:text-xxs after:font-awesome after:duration-250 after:ease-in-out duration-250 relative float-left mt-1 cursor-pointer appearance-none border border-solid border-slate-200 dark:border-slate-750 bg-blue-800/13 bg-contain bg-center bg-no-repeat align-top transition-all after:absolute after:flex after:h-full after:w-full after:items-center after:justify-center after:text-white after:opacity-0 after:transition-all after:content-['\f00c'] checked:border-0 checked:border-transparent checked:bg-transparent checked:after:opacity-100"
                     name="gender" 
                     id="male" 
                     value="male"
                     formControlName="gender"
                     >
                  </div>
                  <legend>Choose your gender:</legend>
                   <div class="float-right">
                    <label for="female">Female</label>
                    <input 
                     type="radio" 
                     class="w-4.8 h-4.8 ease mx-3 rounded-1.4 checked:bg-gradient-to-tl checked:from-blue-500 checked:to-violet-500 after:text-xxs after:font-awesome after:duration-250 after:ease-in-out duration-250 relative float-left mt-1 cursor-pointer appearance-none border border-solid border-slate-200 dark:border-slate-750  bg-blue-800/13 bg-contain bg-center bg-no-repeat align-top transition-all after:absolute after:flex after:h-full after:w-full after:items-center after:justify-center after:text-white after:opacity-0 after:transition-all after:content-['\f00c'] checked:border-0 checked:border-transparent checked:bg-transparent checked:after:opacity-100"
                     name="gender"
                     id="female" 
                     value="female"
                     formControlName="gender"
                     >
                   </div> 
                  </fieldset>
              </div>
            </div>
            <div class="flex justify-end w-full">
              <div class="flex justify-end text-center w-fit" >
                <button type="button" [disabled]="isFirstStepValid!=='VALID'" (click)="nextPage()" class="inline-block w-full3 px-5 py-3.5 mt-6 mb-0 font-bold leading-normal text-center text-white align-middle transition-all bg-blue-500 border-0 rounded-lg cursor-pointer hover:-translate-y-px active:opacity-85 hover:shadow-xs text-sm ease-in tracking-tight-rem shadow-md bg-150 bg-x-25">Next</button>
              </div>
            </div>
          </div>
    
          <!-- Step 2 -->
    
          <div *ngIf="currentStep===2" >
            <div class="mb-4 ">
              <select
                type="text" 
                class="placeholder:text-gray-700   text-center text-sm focus:shadow-primary-outline leading-5.6 ease block w-full rounded-lg  bg-blue-500/13 dark:border-slate-750 dark:placeholder:text-slate-300  bg-clip-padding py-2 px-3 font-normal text-slate-800 dark:text-slate-100 transition-all focus:border-slate-300 dark:focus:border-slate-700   focus:outline-none focus:transition-shadow" 
                placeholder="rol" 
                formControlName="rol"
                >
                <option value="" class="hidden" selected disabled>Select user rol</option>
                <option value="operador">operador</option>
                <option value="doctor">doctor</option>

              </select>
            </div>
            <div class="flex justify-between w-full ">
              <div class="flex justify-start text-center w-fit">
                <button type="button" (click)="previusPage()" class="inline-block w-full px-5 py-3.5 mt-6 mb-0 font-bold leading-normal text-center text-white align-middle transition-all bg-blue-500 border-0 rounded-lg cursor-pointer hover:-translate-y-px active:opacity-85 hover:shadow-xs text-sm ease-in tracking-tight-rem shadow-md bg-150 bg-x-25">Previous</button>
              </div>
              <div class="flex justify-end text-center w-fit">
                <button type="button" (click)="nextPage()" [disabled]="!(isFirstStepValid==='VALID'&& isSecondStepValid==='VALID')" class="inline-block w-full px-5 py-3.5 mt-6 mb-0 font-bold leading-normal text-center text-white align-middle transition-all bg-blue-500 border-0 rounded-lg cursor-pointer hover:-translate-y-px active:opacity-85 hover:shadow-xs text-sm ease-in tracking-tight-rem shadow-md bg-150 bg-x-25">Next</button>
              </div>
            </div>
          </div>


        <!-- Step 3 -->

        <section *ngIf="currentStep===3" >
          <div class="mb-4">
            <input 
              type="file" 
              class="placeholder:text-gray-700 text-sm focus:shadow-primary-outline leading-5.6 ease block w-full appearance-none rounded-lg border border-solid border-gray-300 bg-white dark:bg-slate-600 dark:border-slate-750 dark:placeholder:text-slate-300 dark:text-slate-50 bg-clip-padding py-2 px-3 font-normal text-gray-700 transition-all focus:border-blue-500 dark:focus:border-blue-200 focus:bg-white focus:text-gray-700 focus:outline-none focus:transition-shadow" 
              placeholder="Name" 
              formControlName="photo"
              />
          </div>

          <div class="flex justify-between w-full ">
            <div class="flex justify-start text-center w-fit">
              <button type="button" (click)="previusPage()" class="inline-block w-full px-5 py-3.5 mt-6 mb-0 font-bold leading-normal text-center text-white align-middle transition-all bg-blue-500 border-0 rounded-lg cursor-pointer hover:-translate-y-px active:opacity-85 hover:shadow-xs text-sm ease-in tracking-tight-rem shadow-md bg-150 bg-x-25">Previus</button>
            </div>
            <div class="flex justify-end text-center w-fit">
              <button type="submit" class="inline-block w-full px-5 py-3.5 mt-6 mb-0 font-bold leading-normal text-center text-white align-middle transition-all bg-green-500 border-0 rounded-lg cursor-pointer hover:-translate-y-px active:opacity-85 hover:shadow-xs text-sm ease-in tracking-tight-rem shadow-md bg-150 bg-x-25">Register</button>
            </div>
          </div>
        </section>

        </div>
      </form>
    </div>
  </div>
</div>


